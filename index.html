import React, { useState, useEffect } from 'react';
import { 
  Download, 
  MousePointer2, 
  FileAudio, 
  Cpu, 
  Zap, 
  CheckCircle2, 
  X, 
  ExternalLink, 
  Menu, 
  Mail, 
  MonitorPlay,
  Terminal,
  ShieldAlert,
  ChevronRight
} from 'lucide-react';

// --- DATA: PRODUCT LIST ---
// This array makes it easy to add new programs in the future.
const products = [
  {
    id: 'clipperkit',
    name: 'ClipperKIT+',
    tagline: 'The Ultimate Content Downloader & Converter',
    icon: <Download className="w-12 h-12 text-cyan-400" />,
    shortDescription: 'Download videos/clips from almost any site, convert to lossless h264 mp4, and extract SEO data (titles, tags, transcripts).',
    price: 'View Price',
    gumroadLink: 'https://nearcomplexity.gumroad.com/l/ClipperKIT',
    category: 'Video Tools',
    features: [
      'Download from YouTube, Twitch, TikTok, X, & more',
      '100% Lossless h264 mp4 conversion',
      'Bulk Clip Downloading',
      'Extract SEO (Tags, Description, Comments)',
      'Whisper AI Audio-to-Text Transcription'
    ],
    details: {
      intro: "The BEST TOOL ONLINE for any Content Creator or Clipper! (Windows Only). Download videos and clips using timestamps from almost ANY media hosting website and INSTANTLY convert them into 100% lossless quality files compatible with Premiere Pro, DaVinci Resolve, and more.",
      capabilities: [
        "Download INFINITE clips via 'Clips (Bulk)' feature",
        "Native quality Video, Audio, and YouTube Thumbnails",
        "Convert Audio to WAV or MP3 automatically",
        "Generate full transcribed Audio to Text with Whisper (accurate timestamps)",
        "Extract Title, Description, Tags, and Comments"
      ],
      requirements: [
        "Windows OS",
        "Node.JS (Installer included)",
        "Browser extension for cookies (to bypass bot detection)"
      ],
      disclaimer: "ClipperKIT+ is to be used under fair use copyright laws. We do not condone stealing content. Use this tool to speed up your creative workflow responsibly."
    }
  },
  {
    id: 'mousekeyrecorder',
    name: 'MouseKeyRecorder+',
    tagline: 'Automate Boring Tasks Instantly',
    icon: <MousePointer2 className="w-12 h-12 text-purple-400" />,
    shortDescription: 'Record your mouse movements and keystrokes, then play them back perfectly. Save and load macros for repetitive tasks.',
    price: 'View Price',
    gumroadLink: 'https://nearcomplexity.gumroad.com/l/MouseKeyRecorder',
    category: 'Automation',
    features: [
      'Record Mouse Paths & Clicks',
      'Record Keystrokes',
      'Variable Playback Speed',
      'Save & Load Recordings',
      'Infinite Loop Playback'
    ],
    details: {
      intro: "The BEST TOOL ONLINE for recording mouse movements and key strokes then playing them back to you!",
      capabilities: [
        "Automate boring manual processes",
        "Replay in exact sequence",
        "Control playback speed",
        "Save macros to disk and load them later"
      ],
      requirements: [
        "Windows OS"
      ],
      disclaimer: "Designed to help millions of people do their work more efficiently."
    }
  },
  {
    id: 'transcribesubtitles',
    name: 'TranscribeSubtitles+',
    tagline: 'Local AI Transcription & Subtitling',
    icon: <FileAudio className="w-12 h-12 text-emerald-400" />,
    shortDescription: 'Transcribe video and audio files locally using your GPU. Generate accurate SRT subtitles compatible with editing software.',
    price: 'View Price',
    gumroadLink: 'https://nearcomplexity.gumroad.com/l/qnlczv',
    category: 'AI Tools',
    features: [
      'Runs Locally (Privacy Focused)',
      'Uses Google Whisper Models (Small to Large)',
      'GPU Acceleration (Nvidia CUDA)',
      'Adjustable Subtitle Word Limits (TikTok/Shorts optimized)',
      'Export to SRT'
    ],
    details: {
      intro: "The BEST TOOL ONLINE for transcribing local video/audio files into text transcriptions or subtitles (SRT). Runs locally on your machine using your GPU (Nvidia CUDA) or CPU.",
      capabilities: [
        "Supports all Whisper models (Small to Large for highest accuracy)",
        "Adjustable word count per subtitle (e.g., 3 words for Shorts, 10 for Documentaries)",
        "Generate transcripts with or without timestamps",
        "Natural sentence generation option"
      ],
      requirements: [
        "Nvidia GPU recommended for speed (CUDA)",
        "Works on CPU (slower)"
      ],
      disclaimer: "Perfect for creating scripts from existing media or generating quick subtitles for social media content."
    }
  }
];

// --- COMPONENTS ---

const Modal = ({ product, onClose }) => {
  if (!product) return null;

  // Close modal on escape key
  useEffect(() => {
    const handleEsc = (e) => {
      if (e.key === 'Escape') onClose();
    };
    window.addEventListener('keydown', handleEsc);
    return () => window.removeEventListener('keydown', handleEsc);
  }, [onClose]);

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200">
      <div className="bg-slate-900 border border-slate-700 w-full max-w-3xl max-h-[90vh] rounded-2xl shadow-2xl overflow-hidden flex flex-col">
        {/* Header */}
        <div className="p-6 border-b border-slate-700 flex justify-between items-start bg-slate-800/50">
          <div className="flex items-center gap-4">
            <div className="p-3 bg-slate-950 rounded-lg border border-slate-700">
              {product.icon}
            </div>
            <div>
              <h2 className="text-2xl font-bold text-white">{product.name}</h2>
              <p className="text-slate-400">{product.tagline}</p>
            </div>
          </div>
          <button 
            onClick={onClose}
            className="p-2 hover:bg-slate-700 rounded-full transition-colors text-slate-400 hover:text-white"
          >
            <X size={24} />
          </button>
        </div>

        {/* Scrollable Content */}
        <div className="p-6 overflow-y-auto custom-scrollbar">
          <div className="prose prose-invert max-w-none">
            <h3 className="text-xl font-semibold text-indigo-400 mb-2">Overview</h3>
            <p className="text-slate-300 mb-6 leading-relaxed">
              {product.details.intro}
            </p>

            <h3 className="text-xl font-semibold text-indigo-400 mb-3">Key Capabilities</h3>
            <ul className="space-y-2 mb-6">
              {product.details.capabilities.map((cap, idx) => (
                <li key={idx} className="flex items-start gap-3 text-slate-300">
                  <CheckCircle2 className="w-5 h-5 text-emerald-500 shrink-0 mt-0.5" />
                  <span>{cap}</span>
                </li>
              ))}
            </ul>

            {product.details.requirements && (
              <div className="bg-slate-950/50 p-4 rounded-lg border border-slate-800 mb-6">
                <h4 className="font-semibold text-slate-200 mb-2 flex items-center gap-2">
                  <Terminal className="w-4 h-4" /> System Requirements
                </h4>
                <ul className="list-disc list-inside text-slate-400 text-sm space-y-1">
                  {product.details.requirements.map((req, idx) => (
                    <li key={idx}>{req}</li>
                  ))}
                </ul>
              </div>
            )}

            {product.details.disclaimer && (
              <div className="bg-amber-950/20 p-4 rounded-lg border border-amber-900/50 mb-6">
                <h4 className="font-semibold text-amber-500 mb-2 flex items-center gap-2">
                  <ShieldAlert className="w-4 h-4" /> Disclaimer
                </h4>
                <p className="text-amber-200/80 text-sm italic">
                  {product.details.disclaimer}
                </p>
              </div>
            )}
          </div>
        </div>

        {/* Footer Actions */}
        <div className="p-6 border-t border-slate-700 bg-slate-800/50 flex flex-col sm:flex-row gap-4 justify-end">
          <button 
            onClick={onClose}
            className="px-6 py-3 rounded-lg font-medium text-slate-300 hover:bg-slate-700 transition-colors"
          >
            Close
          </button>
          <a 
            href={product.gumroadLink}
            target="_blank"
            rel="noopener noreferrer"
            className="flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded-lg font-bold transition-all transform hover:scale-105 shadow-lg shadow-indigo-900/20"
          >
            Purchase on Gumroad <ExternalLink size={18} />
          </a>
        </div>
      </div>
    </div>
  );
};

const ProductCard = ({ product, onDetails }) => {
  return (
    <div className="group bg-slate-900 border border-slate-800 rounded-2xl p-6 flex flex-col h-full hover:border-indigo-500/50 transition-all duration-300 hover:shadow-2xl hover:shadow-indigo-500/10 hover:-translate-y-1">
      <div className="mb-6 flex justify-between items-start">
        <div className="p-4 bg-slate-950 rounded-xl border border-slate-800 group-hover:border-indigo-500/30 transition-colors">
          {product.icon}
        </div>
        <span className="px-3 py-1 bg-slate-800 text-slate-400 text-xs font-semibold rounded-full uppercase tracking-wider">
          {product.category}
        </span>
      </div>
      
      <h3 className="text-2xl font-bold text-white mb-2">{product.name}</h3>
      <p className="text-slate-400 mb-6 flex-grow leading-relaxed">
        {product.shortDescription}
      </p>
      
      <ul className="space-y-3 mb-8">
        {product.features.slice(0, 3).map((feature, idx) => (
          <li key={idx} className="flex items-center gap-3 text-sm text-slate-300">
            <div className="w-1.5 h-1.5 rounded-full bg-indigo-500" />
            {feature}
          </li>
        ))}
      </ul>

      <div className="flex gap-3 mt-auto">
        <button 
          onClick={() => onDetails(product)}
          className="flex-1 px-4 py-3 bg-slate-800 text-white rounded-lg font-medium hover:bg-slate-700 transition-colors"
        >
          Details
        </button>
        <a 
          href={product.gumroadLink}
          target="_blank"
          rel="noopener noreferrer"
          className="flex-1 px-4 py-3 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-500 transition-colors flex justify-center items-center gap-2"
        >
          Buy <ExternalLink size={16} />
        </a>
      </div>
    </div>
  );
};

export default function App() {
  const [selectedProduct, setSelectedProduct] = useState(null);
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  return (
    <div className="min-h-screen bg-slate-950 text-slate-200 font-sans selection:bg-indigo-500/30">
      
      {/* --- NAVBAR --- */}
      <nav className="fixed top-0 w-full z-40 bg-slate-950/80 backdrop-blur-md border-b border-slate-800">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-20">
            <div className="flex items-center gap-2">
              <div className="w-8 h-8 bg-gradient-to-tr from-indigo-500 to-purple-500 rounded-lg flex items-center justify-center">
                <Zap className="text-white w-5 h-5" />
              </div>
              <span className="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400">
                NearComplexity
              </span>
            </div>

            {/* Desktop Nav */}
            <div className="hidden md:flex items-center gap-8">
              <a href="#products" className="text-sm font-medium text-slate-300 hover:text-white transition-colors">Software</a>
              <a href="#about" className="text-sm font-medium text-slate-300 hover:text-white transition-colors">About</a>
              <a href="#contact" className="text-sm font-medium text-slate-300 hover:text-white transition-colors">Contact</a>
              <a 
                href="#products" 
                className="px-5 py-2 bg-white text-slate-950 rounded-full text-sm font-bold hover:bg-indigo-50 transition-colors"
              >
                Browse Store
              </a>
            </div>

            {/* Mobile Menu Button */}
            <div className="md:hidden">
              <button 
                onClick={() => setIsMenuOpen(!isMenuOpen)}
                className="p-2 text-slate-400 hover:text-white"
              >
                {isMenuOpen ? <X /> : <Menu />}
              </button>
            </div>
          </div>
        </div>

        {/* Mobile Nav */}
        {isMenuOpen && (
          <div className="md:hidden bg-slate-900 border-b border-slate-800 p-4 space-y-4">
            <a href="#products" onClick={() => setIsMenuOpen(false)} className="block text-slate-300 hover:text-white">Software</a>
            <a href="#about" onClick={() => setIsMenuOpen(false)} className="block text-slate-300 hover:text-white">About</a>
            <a href="#contact" onClick={() => setIsMenuOpen(false)} className="block text-slate-300 hover:text-white">Contact</a>
          </div>
        )}
      </nav>

      {/* --- HERO SECTION --- */}
      <section className="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden">
        {/* Abstract Background Decoration */}
        <div className="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full max-w-7xl opacity-20 pointer-events-none">
          <div className="absolute top-20 left-10 w-72 h-72 bg-purple-500 rounded-full blur-[100px]" />
          <div className="absolute top-40 right-10 w-96 h-96 bg-indigo-500 rounded-full blur-[100px]" />
        </div>

        <div className="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
          <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-slate-900 border border-slate-800 text-indigo-400 text-sm font-medium mb-8 animate-fade-in-up">
            <Cpu size={14} /> Automation Tools for Creators
          </div>
          <h1 className="text-5xl md:text-7xl font-extrabold text-white tracking-tight mb-8">
            Work Less. <br className="hidden md:block" />
            <span className="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-cyan-400">
              Create More.
            </span>
          </h1>
          <p className="max-w-2xl mx-auto text-lg text-slate-400 mb-10 leading-relaxed">
            Near Complexity specializes in creating powerful automation tools that help millions of people do their work more efficiently. From video processing to macro automation.
          </p>
          <div className="flex flex-col sm:flex-row justify-center gap-4">
            <a 
              href="#products"
              className="px-8 py-4 bg-indigo-600 text-white rounded-lg font-bold text-lg hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-900/20"
            >
              Explore Tools
            </a>
            <a 
              href="#about"
              className="px-8 py-4 bg-slate-900 text-white border border-slate-800 rounded-lg font-bold text-lg hover:bg-slate-800 transition-all"
            >
              Our Mission
            </a>
          </div>
        </div>
      </section>

      {/* --- PRODUCT GRID --- */}
      <section id="products" className="py-24 bg-slate-950 relative">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-end mb-12">
            <div>
              <h2 className="text-3xl font-bold text-white mb-4">Our Software</h2>
              <p className="text-slate-400">Professional grade tools available for instant download.</p>
            </div>
            <div className="hidden md:flex gap-2">
              {/* Optional category filters could go here */}
            </div>
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {products.map((product) => (
              <ProductCard 
                key={product.id} 
                product={product} 
                onDetails={setSelectedProduct}
              />
            ))}
          </div>
        </div>
      </section>

      {/* --- FEATURES / MISSION --- */}
      <section id="about" className="py-24 bg-slate-900 border-y border-slate-800">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
            <div>
              <h2 className="text-3xl font-bold text-white mb-6">Efficiency through Complexity</h2>
              <p className="text-slate-400 text-lg leading-relaxed mb-6">
                We believe that complex problems deserve elegant solutions. Our mission is to abstract the complexity of video processing, data extraction, and repetitive tasks into simple, one-click interfaces.
              </p>
              <div className="space-y-4">
                <div className="flex gap-4">
                  <div className="p-3 bg-indigo-500/10 rounded-lg h-fit">
                    <MonitorPlay className="text-indigo-400" />
                  </div>
                  <div>
                    <h3 className="font-bold text-white">For Creators</h3>
                    <p className="text-slate-400 text-sm">Tools designed to speed up the content creation pipeline.</p>
                  </div>
                </div>
                <div className="flex gap-4">
                  <div className="p-3 bg-purple-500/10 rounded-lg h-fit">
                    <Zap className="text-purple-400" />
                  </div>
                  <div>
                    <h3 className="font-bold text-white">For Power Users</h3>
                    <p className="text-slate-400 text-sm">Macro recorders and automations to bypass manual labor.</p>
                  </div>
                </div>
              </div>
            </div>
            <div className="relative">
              <div className="absolute inset-0 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl blur-2xl opacity-20"></div>
              <div className="relative bg-slate-950 border border-slate-800 p-8 rounded-2xl">
                <div className="flex items-center gap-4 mb-6">
                  <div className="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center">
                    <CheckCircle2 className="text-green-400" />
                  </div>
                  <div>
                    <div className="font-bold text-white">Verified Secure</div>
                    <div className="text-xs text-slate-500">All tools tested and malware free</div>
                  </div>
                </div>
                <div className="space-y-4">
                  <div className="h-2 bg-slate-800 rounded-full w-full"></div>
                  <div className="h-2 bg-slate-800 rounded-full w-3/4"></div>
                  <div className="h-2 bg-slate-800 rounded-full w-5/6"></div>
                </div>
                <div className="mt-8 pt-6 border-t border-slate-800 flex justify-between items-center">
                  <span className="text-slate-400">Trusted by creators worldwide</span>
                  <div className="flex -space-x-2">
                    {[1,2,3,4].map(i => (
                      <div key={i} className="w-8 h-8 rounded-full bg-slate-700 border-2 border-slate-950 flex items-center justify-center text-xs">
                        {i}
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* --- CONTACT / FOOTER --- */}
      <footer id="contact" className="bg-slate-950 pt-20 pb-10">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-12 mb-16">
            <div>
              <div className="flex items-center gap-2 mb-4">
                <div className="w-6 h-6 bg-gradient-to-tr from-indigo-500 to-purple-500 rounded flex items-center justify-center">
                  <Zap className="text-white w-3 h-3" />
                </div>
                <span className="text-lg font-bold text-white">NearComplexity</span>
              </div>
              <p className="text-slate-500 text-sm">
                Developing the next generation of automation tools.
              </p>
            </div>
            
            <div>
              <h3 className="text-white font-bold mb-4">Support</h3>
              <ul className="space-y-2 text-sm text-slate-400">
                <li><a href="#" className="hover:text-indigo-400">Documentation</a></li>
                <li><a href="#" className="hover:text-indigo-400">Privacy Policy</a></li>
                <li><a href="#" className="hover:text-indigo-400">Terms of Service</a></li>
              </ul>
            </div>

            <div>
              <h3 className="text-white font-bold mb-4">Contact Us</h3>
              <p className="text-slate-400 text-sm mb-4">
                Have questions or need support? Reach out to us directly.
              </p>
              <a 
                href="mailto:nearcomplexityofficial@gmail.com" 
                className="inline-flex items-center gap-2 text-indigo-400 hover:text-indigo-300 transition-colors"
              >
                <Mail size={16} /> nearcomplexityofficial@gmail.com
              </a>
            </div>
          </div>
          
          <div className="border-t border-slate-900 pt-8 flex flex-col md:flex-row justify-between items-center text-sm text-slate-600">
            <p>&copy; {new Date().getFullYear()} Near Complexity. All rights reserved.</p>
            <p>Designed for Efficiency.</p>
          </div>
        </div>
      </footer>

      {/* --- MODAL RENDER --- */}
      {selectedProduct && (
        <Modal 
          product={selectedProduct} 
          onClose={() => setSelectedProduct(null)} 
        />
      )}
    </div>
  );
}
